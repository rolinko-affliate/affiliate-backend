basePath: /api/v1
definitions:
  domain.Affiliate:
    properties:
      affiliate_id:
        type: integer
      billing_info:
        description: JSONB stored as string
        type: string
      contact_address:
        description: JSONB stored as string
        type: string
      contact_email:
        type: string
      created_at:
        type: string
      default_currency_id:
        type: string
      default_payment_terms:
        type: integer
      internal_notes:
        description: General purpose fields moved from EverflowProviderData
        type: string
      invoice_amount_threshold:
        type: number
      labels:
        description: JSONB stored as string (array of strings)
        type: string
      name:
        type: string
      organization_id:
        type: integer
      payment_details:
        description: JSONB stored as string
        type: string
      status:
        description: '''active'', ''pending'', ''rejected'', ''inactive'''
        type: string
      updated_at:
        type: string
    type: object
  domain.AffiliateProviderMapping:
    properties:
      affiliate_id:
        type: integer
      api_credentials:
        description: JSONB stored as string for API keys/tokens
        type: string
      created_at:
        type: string
      last_sync_at:
        type: string
      mapping_id:
        type: integer
      provider_affiliate_id:
        description: e.g., Everflow's network_affiliate_id
        type: string
      provider_config:
        description: JSONB stored as string
        type: string
      provider_data:
        description: Provider-specific data (stored as JSONB) - contains all Everflow-specific
          fields
        type: string
      provider_type:
        description: '''everflow'' for MVP'
        type: string
      sync_error:
        type: string
      sync_status:
        description: Synchronization metadata
        type: string
      updated_at:
        type: string
    type: object
  domain.Organization:
    properties:
      created_at:
        type: string
      name:
        type: string
      organization_id:
        type: integer
      type:
        $ref: '#/definitions/domain.OrganizationType'
      updated_at:
        type: string
    type: object
  domain.OrganizationType:
    enum:
    - advertiser
    - affiliate
    - platform_owner
    type: string
    x-enum-varnames:
    - OrganizationTypeAdvertiser
    - OrganizationTypeAffiliate
    - OrganizationTypePlatformOwner
  domain.Profile:
    properties:
      created_at:
        type: string
      email:
        type: string
      first_name:
        description: Pointer for NULLable
        type: string
      id:
        description: Stores the auth.uid() from Supabase Auth
        type: string
      last_name:
        description: Pointer for NULLable
        type: string
      organization_id:
        description: Pointer for NULLable
        type: integer
      role_id:
        type: integer
      role_name:
        description: Mandatory role name
        type: string
      updated_at:
        type: string
    type: object
  handlers.CreateAffiliateProviderMappingRequest:
    properties:
      affiliate_id:
        description: Affiliate ID
        example: 1
        type: integer
      provider_affiliate_id:
        description: Provider's affiliate ID
        example: aff-12345
        type: string
      provider_config:
        description: |-
          Provider configuration in JSON format
          swagger:strfmt json
        type: object
      provider_type:
        description: Provider type (e.g., 'everflow')
        example: everflow
        type: string
    required:
    - affiliate_id
    - provider_type
    type: object
  handlers.CreateAffiliateRequest:
    properties:
      contact_email:
        description: Contact email address
        example: affiliate@example.com
        type: string
      name:
        description: Affiliate name
        example: Example Affiliate
        type: string
      organization_id:
        description: Organization ID
        example: 1
        type: integer
      payment_details:
        description: |-
          Payment details in JSON format
          swagger:strfmt json
        type: object
      status:
        description: Status of the affiliate (active, pending, inactive, rejected)
        example: active
        type: string
    required:
    - name
    - organization_id
    type: object
  handlers.CreateOrganizationRequest:
    properties:
      name:
        type: string
      type:
        enum:
        - advertiser
        - affiliate
        - platform_owner
        type: string
    required:
    - name
    - type
    type: object
  handlers.ErrorResponse:
    properties:
      details:
        type: string
      error:
        type: string
    type: object
  handlers.ProfileRequest:
    properties:
      email:
        type: string
      first_name:
        type: string
      last_name:
        type: string
      organization_id:
        type: integer
      role_id:
        type: integer
    type: object
  handlers.SupabaseUserWebhookPayload:
    properties:
      record:
        properties:
          email:
            type: string
          id:
            type: string
        type: object
      table:
        description: e.g., "users"
        type: string
      type:
        description: e.g., "INSERT"
        type: string
    type: object
  handlers.UpdateAffiliateProviderMappingRequest:
    properties:
      provider_affiliate_id:
        description: Provider's affiliate ID
        example: aff-12345
        type: string
      provider_config:
        description: |-
          Provider configuration in JSON format
          swagger:strfmt json
        type: object
    type: object
  handlers.UpdateAffiliateRequest:
    properties:
      contact_email:
        description: Contact email address
        example: updated@example.com
        type: string
      name:
        description: Affiliate name
        example: Updated Affiliate
        type: string
      payment_details:
        description: |-
          Payment details in JSON format
          swagger:strfmt json
        type: object
      status:
        description: Status of the affiliate (active, pending, inactive, rejected)
        example: active
        type: string
    required:
    - name
    - status
    type: object
  handlers.UpdateOrganizationRequest:
    properties:
      name:
        type: string
      type:
        enum:
        - advertiser
        - affiliate
        - platform_owner
        type: string
    required:
    - name
    - type
    type: object
  handlers.UpdateProfileRequest:
    properties:
      email:
        type: string
      first_name:
        type: string
      last_name:
        type: string
      organization_id:
        type: integer
      role_id:
        type: integer
    type: object
  handlers.UpsertProfileRequest:
    properties:
      email:
        type: string
      first_name:
        type: string
      id:
        type: string
      last_name:
        type: string
      organization_id:
        type: integer
      role_id:
        type: integer
    type: object
  models.CampaignListResponse:
    properties:
      campaigns:
        items:
          $ref: '#/definitions/models.CampaignResponse'
        type: array
      page:
        type: integer
      page_size:
        type: integer
      total:
        type: integer
    type: object
  models.CampaignResponse:
    properties:
      advertiser_id:
        type: integer
      campaign_id:
        type: integer
      conversion_method:
        type: string
      created_at:
        type: string
      currency_id:
        type: string
      daily_click_cap:
        type: integer
      daily_conversion_cap:
        type: integer
      description:
        type: string
      destination_url:
        description: Core campaign fields
        type: string
      end_date:
        type: string
      global_click_cap:
        type: integer
      global_conversion_cap:
        type: integer
      internal_notes:
        type: string
      is_caps_enabled:
        description: Caps and limits
        type: boolean
      monthly_click_cap:
        type: integer
      monthly_conversion_cap:
        type: integer
      name:
        type: string
      organization_id:
        type: integer
      payout_amount:
        type: number
      payout_type:
        description: Payout and revenue configuration
        type: string
      preview_url:
        type: string
      revenue_amount:
        type: number
      revenue_type:
        type: string
      session_definition:
        type: string
      session_duration:
        type: integer
      start_date:
        type: string
      status:
        type: string
      terms_and_conditions:
        type: string
      thumbnail_url:
        type: string
      updated_at:
        type: string
      visibility:
        type: string
      weekly_click_cap:
        type: integer
      weekly_conversion_cap:
        type: integer
    type: object
  models.CreateCampaignRequest:
    properties:
      advertiser_id:
        type: integer
      conversion_method:
        enum:
        - server_postback
        - pixel
        type: string
      currency_id:
        type: string
      daily_click_cap:
        type: integer
      daily_conversion_cap:
        type: integer
      description:
        type: string
      destination_url:
        description: Core campaign fields
        type: string
      end_date:
        type: string
      global_click_cap:
        type: integer
      global_conversion_cap:
        type: integer
      internal_notes:
        type: string
      is_caps_enabled:
        description: Caps and limits
        type: boolean
      monthly_click_cap:
        type: integer
      monthly_conversion_cap:
        type: integer
      name:
        type: string
      organization_id:
        type: integer
      payout_amount:
        type: number
      payout_type:
        description: Payout and revenue configuration
        enum:
        - cpa
        - cpc
        - cpm
        type: string
      preview_url:
        type: string
      revenue_amount:
        type: number
      revenue_type:
        enum:
        - rpa
        - rpc
        - rpm
        type: string
      session_definition:
        enum:
        - cookie
        - ip
        - fingerprint
        type: string
      session_duration:
        type: integer
      start_date:
        type: string
      status:
        enum:
        - draft
        - active
        - paused
        - archived
        type: string
      terms_and_conditions:
        type: string
      thumbnail_url:
        type: string
      visibility:
        enum:
        - public
        - require_approval
        - private
        type: string
      weekly_click_cap:
        type: integer
      weekly_conversion_cap:
        type: integer
    required:
    - advertiser_id
    - name
    - organization_id
    - status
    type: object
  models.UpdateCampaignRequest:
    properties:
      conversion_method:
        enum:
        - server_postback
        - pixel
        type: string
      currency_id:
        type: string
      daily_click_cap:
        type: integer
      daily_conversion_cap:
        type: integer
      description:
        type: string
      destination_url:
        description: Core campaign fields
        type: string
      end_date:
        type: string
      global_click_cap:
        type: integer
      global_conversion_cap:
        type: integer
      internal_notes:
        type: string
      is_caps_enabled:
        description: Caps and limits
        type: boolean
      monthly_click_cap:
        type: integer
      monthly_conversion_cap:
        type: integer
      name:
        type: string
      payout_amount:
        type: number
      payout_type:
        description: Payout and revenue configuration
        enum:
        - cpa
        - cpc
        - cpm
        type: string
      preview_url:
        type: string
      revenue_amount:
        type: number
      revenue_type:
        enum:
        - rpa
        - rpc
        - rpm
        type: string
      session_definition:
        enum:
        - cookie
        - ip
        - fingerprint
        type: string
      session_duration:
        type: integer
      start_date:
        type: string
      status:
        enum:
        - draft
        - active
        - paused
        - archived
        type: string
      terms_and_conditions:
        type: string
      thumbnail_url:
        type: string
      visibility:
        enum:
        - public
        - require_approval
        - private
        type: string
      weekly_click_cap:
        type: integer
      weekly_conversion_cap:
        type: integer
    required:
    - name
    - status
    type: object
host: localhost:8080
info:
  contact:
    email: support@example.com
    name: API Support
    url: http://www.example.com/support
  description: API Server for Affiliate Backend Application
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: Affiliate Backend API
  version: "1.0"
paths:
  /advertisers/{advertiser_id}/campaigns:
    get:
      description: Retrieve campaigns for a specific advertiser with pagination
      parameters:
      - description: Advertiser ID
        in: path
        name: advertiser_id
        required: true
        type: integer
      - description: 'Page number (default: 1)'
        in: query
        name: page
        type: integer
      - description: 'Page size (default: 20, max: 100)'
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.CampaignListResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      summary: List campaigns by advertiser
      tags:
      - campaigns
  /affiliate-provider-mappings:
    post:
      consumes:
      - application/json
      description: Creates a new mapping between an affiliate and a provider
      parameters:
      - description: Mapping details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.CreateAffiliateProviderMappingRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created mapping
          schema:
            $ref: '#/definitions/domain.AffiliateProviderMapping'
        "400":
          description: Invalid request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Create a new affiliate provider mapping
      tags:
      - affiliates
  /affiliate-provider-mappings/{mappingId}:
    delete:
      consumes:
      - application/json
      description: Deletes a mapping between an affiliate and a provider
      parameters:
      - description: Mapping ID
        in: path
        name: mappingId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "204":
          description: No content
        "400":
          description: Invalid mapping ID
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Mapping not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Delete affiliate provider mapping
      tags:
      - affiliates
    put:
      consumes:
      - application/json
      description: Updates a mapping between an affiliate and a provider
      parameters:
      - description: Mapping ID
        in: path
        name: mappingId
        required: true
        type: integer
      - description: Mapping details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.UpdateAffiliateProviderMappingRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Updated mapping
          schema:
            $ref: '#/definitions/domain.AffiliateProviderMapping'
        "400":
          description: Invalid request
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Mapping not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Update affiliate provider mapping
      tags:
      - affiliates
  /affiliates:
    post:
      consumes:
      - application/json
      description: Creates a new affiliate with the given details
      parameters:
      - description: Affiliate details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.CreateAffiliateRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created affiliate
          schema:
            $ref: '#/definitions/domain.Affiliate'
        "400":
          description: Invalid request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Create a new affiliate
      tags:
      - affiliates
  /affiliates/{id}:
    delete:
      consumes:
      - application/json
      description: Deletes an affiliate by its ID
      parameters:
      - description: Affiliate ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "204":
          description: No content
        "400":
          description: Invalid affiliate ID
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Affiliate not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Delete affiliate
      tags:
      - affiliates
    get:
      consumes:
      - application/json
      description: Retrieves an affiliate by its ID
      parameters:
      - description: Affiliate ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Affiliate details
          schema:
            $ref: '#/definitions/domain.Affiliate'
        "400":
          description: Invalid affiliate ID
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Affiliate not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Get affiliate by ID
      tags:
      - affiliates
    put:
      consumes:
      - application/json
      description: Updates an affiliate with the given details
      parameters:
      - description: Affiliate ID
        in: path
        name: id
        required: true
        type: integer
      - description: Affiliate details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.UpdateAffiliateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Updated affiliate
          schema:
            $ref: '#/definitions/domain.Affiliate'
        "400":
          description: Invalid request
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Affiliate not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Update affiliate
      tags:
      - affiliates
  /affiliates/{id}/provider-mappings/{providerType}:
    get:
      consumes:
      - application/json
      description: Retrieves a mapping between an affiliate and a provider
      parameters:
      - description: Affiliate ID
        in: path
        name: id
        required: true
        type: integer
      - description: Provider Type
        in: path
        name: providerType
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Mapping details
          schema:
            $ref: '#/definitions/domain.AffiliateProviderMapping'
        "400":
          description: Invalid request
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Mapping not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Get affiliate provider mapping
      tags:
      - affiliates
  /campaigns:
    post:
      consumes:
      - application/json
      description: Create a new campaign with the provided details
      parameters:
      - description: Campaign creation request
        in: body
        name: campaign
        required: true
        schema:
          $ref: '#/definitions/models.CreateCampaignRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/models.CampaignResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      summary: Create a new campaign
      tags:
      - campaigns
  /campaigns/{id}:
    delete:
      description: Delete a campaign by its ID
      parameters:
      - description: Campaign ID
        in: path
        name: id
        required: true
        type: integer
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      summary: Delete a campaign
      tags:
      - campaigns
    get:
      description: Retrieve a campaign by its ID
      parameters:
      - description: Campaign ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.CampaignResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      summary: Get a campaign by ID
      tags:
      - campaigns
    put:
      consumes:
      - application/json
      description: Update an existing campaign with the provided details
      parameters:
      - description: Campaign ID
        in: path
        name: id
        required: true
        type: integer
      - description: Campaign update request
        in: body
        name: campaign
        required: true
        schema:
          $ref: '#/definitions/models.UpdateCampaignRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.CampaignResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      summary: Update a campaign
      tags:
      - campaigns
  /health:
    get:
      description: Returns the health status of the API
      produces:
      - application/json
      responses:
        "200":
          description: Status UP
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Health check endpoint
      tags:
      - system
  /organizations:
    get:
      consumes:
      - application/json
      description: Retrieves a list of organizations with pagination
      parameters:
      - description: 'Page number (default: 1)'
        in: query
        name: page
        type: integer
      - description: 'Page size (default: 10)'
        in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of organizations
          schema:
            items:
              $ref: '#/definitions/domain.Organization'
            type: array
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: List organizations
      tags:
      - organizations
    post:
      consumes:
      - application/json
      description: Creates a new organization with the given name
      parameters:
      - description: Organization details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.CreateOrganizationRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created organization
          schema:
            $ref: '#/definitions/domain.Organization'
        "400":
          description: Invalid request
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden - Only admins can create organizations
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Create a new organization
      tags:
      - organizations
  /organizations/{id}:
    delete:
      consumes:
      - application/json
      description: Deletes an organization by its ID
      parameters:
      - description: Organization ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "204":
          description: No content
        "400":
          description: Invalid organization ID
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden - User doesn't have permission
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Organization not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Delete organization
      tags:
      - organizations
    get:
      consumes:
      - application/json
      description: Retrieves an organization by its ID
      parameters:
      - description: Organization ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Organization details
          schema:
            $ref: '#/definitions/domain.Organization'
        "400":
          description: Invalid organization ID
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden - User doesn't have permission
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Organization not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Get organization by ID
      tags:
      - organizations
    put:
      consumes:
      - application/json
      description: Updates an organization with the given details
      parameters:
      - description: Organization ID
        in: path
        name: id
        required: true
        type: integer
      - description: Organization details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.UpdateOrganizationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Updated organization
          schema:
            $ref: '#/definitions/domain.Organization'
        "400":
          description: Invalid request
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden - User doesn't have permission
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Organization not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Update organization
      tags:
      - organizations
  /organizations/{id}/affiliates:
    get:
      consumes:
      - application/json
      description: Retrieves a list of affiliates for an organization with pagination
      parameters:
      - description: Organization ID
        in: path
        name: id
        required: true
        type: integer
      - description: 'Page number (default: 1)'
        in: query
        name: page
        type: integer
      - description: 'Page size (default: 10)'
        in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of affiliates
          schema:
            items:
              $ref: '#/definitions/domain.Affiliate'
            type: array
        "400":
          description: Invalid organization ID
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: List affiliates by organization
      tags:
      - affiliates
  /organizations/{organization_id}/campaigns:
    get:
      description: Retrieve campaigns for a specific organization with pagination
      parameters:
      - description: Organization ID
        in: path
        name: organization_id
        required: true
        type: integer
      - description: 'Page number (default: 1)'
        in: query
        name: page
        type: integer
      - description: 'Page size (default: 20, max: 100)'
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.CampaignListResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      summary: List campaigns by organization
      tags:
      - campaigns
  /profiles:
    post:
      consumes:
      - application/json
      description: Creates a new user profile
      parameters:
      - description: Profile information
        in: body
        name: profile
        required: true
        schema:
          $ref: '#/definitions/handlers.ProfileRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created profile
          schema:
            $ref: '#/definitions/domain.Profile'
        "400":
          description: Invalid request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Create a new profile
      tags:
      - profile
  /profiles/{id}:
    delete:
      consumes:
      - application/json
      description: Deletes an existing user profile
      parameters:
      - description: Profile ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: Profile deleted successfully
        "400":
          description: Invalid profile ID format
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Profile not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Delete a profile
      tags:
      - profile
    put:
      consumes:
      - application/json
      description: Updates an existing user profile with only the provided fields
      parameters:
      - description: Profile ID
        in: path
        name: id
        required: true
        type: string
      - description: Updated profile information
        in: body
        name: profile
        required: true
        schema:
          $ref: '#/definitions/handlers.UpdateProfileRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Updated profile
          schema:
            $ref: '#/definitions/domain.Profile'
        "400":
          description: Invalid request
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Profile not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Update a profile
      tags:
      - profile
  /profiles/upsert:
    post:
      consumes:
      - application/json
      description: Creates a new profile if it doesn't exist, or updates an existing
        one
      parameters:
      - description: Profile information
        in: body
        name: profile
        required: true
        schema:
          $ref: '#/definitions/handlers.UpsertProfileRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Upserted profile
          schema:
            $ref: '#/definitions/domain.Profile'
        "400":
          description: Invalid request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Upsert a profile
      tags:
      - profile
  /public/webhooks/supabase/new-user:
    post:
      consumes:
      - application/json
      description: Process webhook from Supabase when a new user is created
      parameters:
      - description: Webhook payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handlers.SupabaseUserWebhookPayload'
      produces:
      - application/json
      responses:
        "200":
          description: User profile created successfully
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Invalid webhook payload
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Handle Supabase new user webhook
      tags:
      - webhooks
  /users/me:
    get:
      consumes:
      - application/json
      description: Retrieves the profile of the currently authenticated user
      produces:
      - application/json
      responses:
        "200":
          description: User profile
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid user ID format
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Profile not found
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Get current user profile
      tags:
      - profile
securityDefinitions:
  BearerAuth:
    description: Type "Bearer" followed by a space and JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
